<div class="home-wrapper">
  <!-- ðŸŒŸ Top Navbar -->
  <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm sticky-top">
    <div class="container-fluid px-4">
      <!-- Brand -->
      <a class="navbar-brand fw-bold text-primary d-flex align-items-center" routerLink="/home">
        <i class="bi bi-shop me-2 fs-4"></i> ShopHub
      </a>

      <!-- Navbar Right Section -->
      <div class="d-flex align-items-center gap-2 flex-wrap w-100">

        <!-- Left side: search, sort, reset, cart -->
        <div class="d-flex align-items-center gap-2">
          <input
            #navbarSearch
            type="search"
            class="form-control form-control-sm"
            placeholder="Search products..."
            style="width: 200px;"
          />
          <select class="form-select form-select-sm" style="width: 150px;" (change)="onSort($event)">
            <option value="">Sort by Price</option>
            <option value="low">Low to High</option>
            <option value="high">High to Low</option>
          </select>
          <button class="btn btn-outline-secondary btn-sm" (click)="onReset()">Reset</button>
          <a class="btn btn-success btn-sm d-flex align-items-center gap-1" routerLink="/cart">
            <i class="bi bi-cart-fill fs-5"></i> Cart
          </a>
        </div>

        <!-- Right side: greeting + logout pushed to extreme right -->
        <div class="ms-auto d-flex align-items-center gap-2">
          <span class="fw-bold text-primary">ðŸ‘‹ Hi, {{ username }}</span>
          <button class="btn btn-outline-danger btn-sm" (click)="logout()">Logout</button>
        </div>

      </div>
    </div>
  </nav>

  <!-- Notification Bar -->
  <div *ngIf="showCartMessage" class="cart-notification text-center fw-bold">
    {{ cartMessage }}
  </div>

  <!-- Filters / Categories -->
  <div class="container my-4 filter-section">
    <div class="card p-3 shadow-sm">
      <form class="row g-2" [formGroup]="filterForm">
        <div class="col-md-3">
          <select class="form-select" formControlName="categoryId">
            <option value="">All Categories</option>
            <option *ngFor="let cat of categories" [value]="cat.id">{{ cat.name }}</option>
          </select>
        </div>
        <div class="col-md-2">
          <input type="number" class="form-control" placeholder="Min Price" formControlName="minPrice" />
        </div>
        <div class="col-md-2">
          <input type="number" class="form-control" placeholder="Max Price" formControlName="maxPrice" />
        </div>
        <div class="col-md-3 d-flex gap-2">
          <button class="btn btn-primary flex-fill" type="button" (click)="onFilter()">Apply</button>
          <button class="btn btn-secondary flex-fill" type="button" (click)="onReset()">Reset</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Product List -->
  <div class="container product-list">
    <div class="row g-4">
      <div class="col-sm-6 col-md-4 col-lg-3" *ngFor="let product of filteredProducts">
        <app-card
          [product]="product"
          (viewDetails)="viewDetailsEvent($event)"
          (addedToCart)="showAddedToCartMessage($event)"
        ></app-card>
      </div>
    </div>

    <div *ngIf="filteredProducts?.length === 0 && dataLoaded" class="alert alert-warning mt-3 text-center">
      No products found.
    </div>
  </div>
</div>
