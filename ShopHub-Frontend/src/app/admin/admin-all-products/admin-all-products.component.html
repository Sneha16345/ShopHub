<!-- âœ… Full-width background but fixed content width -->
<div class="admin-products-bg">
  <div
    class="admin-products-wrapper container mt-4 position-relative"
    [ngClass]="{'animate-page-entry': firstVisit}"
  >

    <!-- Back to Dashboard Button -->
    <button class="btn btn-secondary mb-3" (click)="goToDashboard()">
      <i class="bi bi-house-door-fill me-2"></i> Back to Dashboard
    </button>

    <!-- Page Title -->
    <h3 class="text-center fw-bold mb-1">Products</h3>
    <p class="text-center text-muted mb-4">
      Manage your product inventory effectively
    </p>

    <!-- Toast Message -->
    <div class="position-fixed top-0 start-50 translate-middle-x mt-3" style="z-index: 1055;">
      <div
        class="toast align-items-center text-white bg-success border-0 show"
        *ngIf="successMessage"
        role="alert"
        aria-live="assertive"
        aria-atomic="true"
      >
        <div class="d-flex">
          <div class="toast-body">{{ successMessage }}</div>
          <button
            type="button"
            class="btn-close btn-close-white me-2 m-auto"
            (click)="successMessage=''"
          ></button>
        </div>
      </div>
    </div>

    <!-- Stats Section -->
    <div class="row g-3 mb-4 text-center">
      <div class="col-md-3">
        <div class="card shadow border-0 p-3">
          <h6 class="text-secondary">Total Products</h6>
          <h3 class="fw-bold text-primary">{{ totalProducts }}</h3>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card shadow border-0 p-3 bg-success text-white">
          <h6>Active Products</h6>
          <h3 class="fw-bold">{{ activeProducts }}</h3>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card shadow border-0 p-3 bg-warning text-dark">
          <h6>Low Stock</h6>
          <h3 class="fw-bold">{{ lowStock }}</h3>
        </div>
      </div>
      <div class="col-md-3">
        <div class="card shadow border-0 p-3 bg-danger text-white">
          <h6>Out of Stock</h6>
          <h3 class="fw-bold">{{ outOfStock }}</h3>
        </div>
      </div>
    </div>

    <!-- Product Table -->
    <div class="card shadow-sm border-0">
      <div class="card-body">
        <table class="table table-hover align-middle">
          <thead class="table-dark">
            <tr>
              <th>Title</th>
              <th>Price ($)</th>
              <th>Quantity</th>
              <th>Category</th>
              <th class="text-center">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let prod of products" class="fade-in-row">
              <td class="fw-semibold">{{ prod.title }}</td>
              <td>${{ prod.price }}</td>
              <td
                [ngClass]="{
                  'text-warning fw-bold': prod.quantity > 0 && prod.quantity <= 10,
                  'text-danger fw-bold': prod.quantity === 0,
                  'text-muted': prod.quantity > 10
                }"
              >
                {{ prod.quantity }}
              </td>
              <td>{{ prod.categoryName }}</td>
              <td class="text-center">
                <div class="d-flex justify-content-center gap-2 flex-wrap">
                  <button class="btn btn-sm btn-primary" (click)="editProduct(prod)">
                    <i class="bi bi-pencil-square"></i> Edit
                  </button>
                  <button class="btn btn-sm btn-danger" (click)="openDeleteModal(prod.id)">
                    <i class="bi bi-trash3"></i> Delete
                  </button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- Delete Modal -->
<div
  class="modal fade"
  id="deleteModal"
  tabindex="-1"
  aria-labelledby="deleteModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-danger text-white">
        <h5 class="modal-title" id="deleteModalLabel">Confirm Delete</h5>
        <button
          type="button"
          class="btn-close btn-close-white"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">Are you sure you want to delete this product?</div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Cancel
        </button>
        <button type="button" class="btn btn-danger" (click)="confirmDelete()">
          Delete
        </button>
      </div>
    </div>
  </div>
</div>
