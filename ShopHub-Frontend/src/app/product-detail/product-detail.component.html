<div class="product-detail-wrapper">

  <!-- Back Button (Left Aligned) -->
  <div class="w-100 mb-4">
    <button
      class="btn btn-outline-primary"
      (click)="backToHome()"
    >
      <i class="bi bi-arrow-left me-2"></i>Back to Home
    </button>
  </div>

  <!-- Notification -->
  <div *ngIf="showCartMessage" class="cart-notification text-center mb-3 show">
    {{ cartMessage }}
  </div>

  <!-- Single Vertical Product Card (Centered) -->
  <div *ngIf="product; else loading" class="card shadow-lg rounded-4 p-4 vertical-card mx-auto text-center">

    <!-- Product Image -->
    <div class="mb-4">
      <img
        [src]="product.imageUrl || 'assets/placeholder.png'"
        [alt]="product.title || 'Product Image'"
        class="img-fluid rounded"
      />
    </div>

    <!-- Product Details -->
    <h2 class="fw-bold mb-3">{{ product.title }}</h2>

    <p class="text-muted mb-4" style="line-height: 1.6;">
      {{ product.description }}
    </p>

    <!-- Price & Quantity Row -->
    <div class="d-flex justify-content-center gap-4 mb-4 info-row">
      <div class="d-flex gap-1 align-items-center">
        <span class="fw-semibold">Price:</span>
        <span class="text-primary fw-bold">${{ product.price }}</span>
      </div>
      <div class="d-flex gap-1 align-items-center">
        <span class="fw-semibold">Available Quantity:</span>
        <span [ngClass]="product.quantity > 0 ? 'text-success' : 'text-danger'">
          {{ product.quantity > 0 ? product.quantity : 'Out of Stock' }}
        </span>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="d-flex flex-column gap-3">
      <button
        class="btn btn-primary btn-lg"
        (click)="onAddToCart($event)"
        [disabled]="product.quantity === 0"
      >
        <i class="bi bi-cart-plus me-2"></i>
        {{ product.quantity > 0 ? 'Add to Cart' : 'Visit Later' }}
      </button>

      <button
        class="btn btn-outline-secondary btn-lg"
        (click)="viewCart()"
      >
        <i class="bi bi-bag me-2"></i>View Cart
      </button>
    </div>
  </div>

  <!-- Loading -->
  <ng-template #loading>
    <div class="text-center py-5">
      <div class="spinner-border text-primary" role="status"></div>
      <p class="mt-3">Loading product details...</p>
    </div>
  </ng-template>
</div>
